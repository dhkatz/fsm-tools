(this["webpackJsonpfsm-tools"]=this["webpackJsonpfsm-tools"]||[]).push([[0],{119:function(t,e){},120:function(t,e){},180:function(t,e){},328:function(t,e,n){"use strict";n.r(e);var i=n(2),a=n(0),s=n.n(a),c=n(48),r=n.n(c),l=(n(172),n(338)),o=n(339),u=n(55),h=n(7),j=n(20),b=n(334),d=n(335),f=n(336),p=n(337),O=n(340),x=n(36),v=n(166),m=n(160),y=n(84),w=n.n(y),g=n(37),E=n(21),I=n(79),S=n(162),T=n(83),A=n(80),k=n(108),z={STATES:/:states:\s*((\w+\s*)+)/,INITIAL:/:initial:\s*(\w+)\s*/,ACCEPTING:/:accept:\s*((\w+\s*)+)/,ALPHABET:/:alphabet:\s*((\w\s*)+)/,TRANSITIONS:/:transitions:\n((\w+\s*,\s*\w+\s*>\s*\w+\n?)*)/},N=function(t){Object(T.a)(n,t);var e=Object(A.a)(n);function n(t){var i;return Object(I.a)(this,n),(i=e.call(this,Object(x.a)(Object(x.a)({},t),{},{multigraph:!0}))).initial=void 0,i.alphabet=new Set,i.accepted=new Set,i.setGraph({rankdir:"LR"}),i}return Object(S.a)(n,[{key:"isAccepted",value:function(t){var e=this.testInput(t);return void 0!==e&&this.accepted.has(e)}},{key:"setInitial",value:function(t){return this.initial=t,this}},{key:"setAccepted",value:function(t,e){return this.accepted.add(t),this.setNode(t,e)}},{key:"setSymbol",value:function(t,e){return this.alphabet.add(t),this}},{key:"setTransition",value:function(t,e,n){var i=this.edge(t,e);return i?i.symbols.includes(n)?this:this.setEdge(t,e,{label:"".concat(i.label,",").concat(n),symbols:[].concat(Object(E.a)(i.symbols),[n])}):this.setEdge(t,e,{label:n,symbols:[n]})}},{key:"transitions",value:function(){return this.edges()}},{key:"transition",value:function(t){return this.edge(t)}},{key:"description",value:function(){var t=this;if(0===this.nodes().length)return"";var e="";return e+=":states:\n".concat(this.nodes().join("\n"),"\n"),e+=":initial:\n".concat(this.initial,"\n"),this.accepted.size>0&&(e+=":accept:\n".concat(Object(E.a)(this.accepted).join("\n"),"\n")),this.alphabet.size>0&&(e+=":alphabet:\n".concat(Object(E.a)(this.alphabet).join("\n"),"\n")),this.transitions().length>0&&(e+=":transitions:\n".concat(this.transitions().map((function(e){return{v:e.v,w:e.w,symbols:t.edge(e).symbols}})).flatMap((function(t){return t.symbols.map((function(e){return"".concat(t.v,", ").concat(e," > ").concat(t.w)}))})).join("\n"),"\n")),e}},{key:"minimize",value:function(){for(var t=this,e=this.reachable(),i=this.setIntersect(this.accepted,e),a=this.setIntersect(this.setDiff(new Set(this.nodes()),i),e),s=[i,a],c=[i,a];c.length>0;){var r,l=c.pop(),o=Object(g.a)(this.alphabet);try{var u=function(){var e,n=r.value,i=new Set,a=Object(g.a)(t.transitions());try{for(a.s();!(e=a.n()).done;){var o=e.value;if(t.edge(o).symbols.includes(n)){var u,h=Object(g.a)(l);try{for(h.s();!(u=h.n()).done;){var j=u.value;o.w===j&&i.add(o.v)}}catch(b){h.e(b)}finally{h.f()}}}}catch(b){a.e(b)}finally{a.f()}s=s.flatMap((function(e){var n=t.setDiff(e,i),a=t.setIntersect(i,e);return n.size>0&&a.size>0?(c.includes(e)?(c.splice(c.indexOf(e),1),c.push(a,n)):c.push(a.size<=n.size?a:n),[a,n]):e}))};for(o.s();!(r=o.n()).done;)u()}catch(d){o.e(d)}finally{o.f()}}var h=s.filter((function(t){return t.size>0})),j=new Map,b=new n({multigraph:!0});return h.forEach((function(t){var e=Object(E.a)(t).join("");t.forEach((function(t){return j.set(t,e)}))})),h.forEach((function(e){var n=Object(E.a)(e)[0];b.setNode(j.get(n)),t.accepted.has(n)&&b.setAccepted(j.get(n),{peripheries:2}),t.outEdges(n).forEach((function(e){t.edge(e).symbols.forEach((function(t){b.setTransition(j.get(n),j.get(e.w),t)}))}))})),b.setInitial(j.get(this.initial)),Object(E.a)(this.alphabet).forEach((function(t){return b.setSymbol(t,{})})),b}},{key:"testInput",value:function(t){var e,n=this.initial,i=Object(g.a)(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(!this.alphabet.has(a))return;var s=this.outEdges(n),c=!1;if(s){var r,l=Object(g.a)(s);try{for(l.s();!(r=l.n()).done;){var o=r.value;if(this.edge(o).symbols.includes(a)){n=o.w,c=!0;break}}}catch(u){l.e(u)}finally{l.f()}}if(!c)return n}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"reachable",value:function(){for(var t=this.initial,e=[t],n=new Set([t]);e.length>0;){var i,a=e.pop(),s=Object(g.a)(this.transitions());try{for(s.s();!(i=s.n()).done;){var c=i.value;a===c.v&&(n.has(c.w)||(n.add(c.w),e.includes(c.w)||e.push(c.w)))}}catch(r){s.e(r)}finally{s.f()}}return n}},{key:"setDiff",value:function(t,e){return new Set(Object(E.a)(t).filter((function(t){return!e.has(t)})))}},{key:"setIntersect",value:function(t,e){return new Set(Object(E.a)(t).filter((function(t){return e.has(t)})))}}],[{key:"parse",value:function(t){return"string"===typeof t?this.build(C(t)):this.build(t)}},{key:"build",value:function(t){var e=new n,i=t.states,a=t.initial,s=t.accept,c=t.alphabet,r=t.transitions;if(!i)return e;if(!a)throw new Error("Cannot parse StateMachine with no initial state!");if(!i.includes(a))throw new Error("Initial state set to a state that does not exist!");if(s&&s.length>0&&s.some((function(t){return!i.includes(t)})))throw new Error("Accepted states includes a state that does not exist!");if(r&&r.length>0){if(!c||0===c.length)throw new Error("Cannot specify transitions with an empty alphabet!");if(r.some((function(t){return!c.includes(t[1])})))throw new Error("Transition includes a symbol which is not defined in the alphabet!");if(r.some((function(t){return!i.includes(t[0])||!i.includes(t[2])})))throw new Error("Transition includes a state which is not defined in states!")}return(c||[]).forEach((function(t){return e.setSymbol(t,{})})),i.forEach((function(t){return e.setNode(t)})),e.setInitial(a),(s||[]).forEach((function(t){return e.setAccepted(t,{peripheries:2})})),(r||[]).forEach((function(t){return e.setTransition(t[0],t[2],t[1])})),e}}]),n}(k.Graph),C=function(t){return{initial:P(t),states:M(t),accept:D(t),alphabet:L(t),transitions:B(t)}},M=function(t){var e=z.STATES.exec(t);return e&&e[1]?e[1].split(/\s+/).map((function(t){return t.trim()})).filter((function(t){return""!==t})):null},P=function(t){var e=z.INITIAL.exec(t);return e&&e[1]?e[1]:null},D=function(t){var e=z.ACCEPTING.exec(t);return e&&e[1]?e[1].split(/\s+/).map((function(t){return t.trim()})).filter((function(t){return""!==t})):[]},L=function(t){var e=z.ALPHABET.exec(t);return e&&e[1]?e[1].split(/\s*/).map((function(t){return t.trim()})).filter((function(t){return""!==t})):[]},B=function(t){var e=z.TRANSITIONS.exec(t);return e?Object(E.a)(e[1].matchAll(/(\w+)\s*,\s*(\w+)\s*>\s*(\w+)/g)).map((function(t){return[t[1],t[2],t[3]]})):[]},G=function(t){var e=t.minimize,n=t.description,s=t.input,c=Object(v.a)(t,["minimize","description","input"]),r=Object(a.useState)(""),l=Object(j.a)(r,2),o=l[0],u=l[1],h=Object(a.useState)(null),b=Object(j.a)(h,2),d=b[0],f=b[1];return Object(a.useEffect)((function(){try{var t=N.parse(n),i=e?t.minimize():t;if(null!==s){var a=i.testInput(s||"");if(a){var c=i.node(a);i.setNode(a,Object(x.a)(Object(x.a)({},c),{},{fillcolor:"#f54f4c",style:"filled"}))}}var r=e?w.a.write(t.minimize()):w.a.write(t);w.a.read(r),f(r),u("")}catch(l){u("".concat(l.name,": ").concat(l.message)),f(null)}return function(){f(null)}}),[n,e,s]),d?Object(i.jsx)(m.a,Object(x.a)({dot:d},c)):Object(i.jsx)("div",{children:o})};G.defaultProps={minimize:!1,input:null};var F=function(){var t=Object(a.useState)(":states:\na\nb\n:initial:\na\n:accept:\nb\na\n:alphabet:\n0\n1\n:transitions:\na, 0 > b\na, 1 > b\nb, 0 > b\nb, 1 > a"),e=Object(j.a)(t,2),n=e[0],s=e[1],c=Object(a.useState)(""),r=Object(j.a)(c,2),l=r[0],o=r[1];return Object(a.useEffect)((function(){try{var t=N.parse(n).minimize();console.log(t),o(t.description())}catch(e){o({})}}),[n]),Object(i.jsxs)(b.a,{children:[Object(i.jsx)("h1",{children:"DFA Minimizer"}),Object(i.jsxs)(d.a,{children:[Object(i.jsx)(f.a,{children:Object(i.jsxs)(b.a,{children:[Object(i.jsxs)(d.a,{children:[Object(i.jsx)("h2",{children:"Input Description"}),Object(i.jsxs)(p.a,{style:{height:"375px"},children:[Object(i.jsx)(p.a.Prepend,{children:Object(i.jsx)(p.a.Text,{children:"Input"})}),Object(i.jsx)(O.a,{value:n,as:"textarea","aria-label":"input",onChange:function(t){return s(t.target.value)}})]})]}),Object(i.jsx)("br",{}),Object(i.jsxs)(d.a,{children:[Object(i.jsx)("h2",{children:"Input Machine"}),Object(i.jsx)(G,{description:n,options:{height:200}})]})]})}),Object(i.jsx)(f.a,{children:Object(i.jsxs)(b.a,{children:[Object(i.jsxs)(d.a,{children:[Object(i.jsx)("h2",{children:"Minimized Description"}),Object(i.jsxs)(p.a,{style:{height:"375px"},children:[Object(i.jsx)(p.a.Prepend,{children:Object(i.jsx)(p.a.Text,{children:"Input"})}),Object(i.jsx)(O.a,{disabled:!0,as:"textarea",value:l})]})]}),Object(i.jsx)("br",{}),Object(i.jsxs)(d.a,{children:[Object(i.jsx)("h2",{children:"Output Machine"}),Object(i.jsx)(G,{description:n,minimize:!0,options:{height:200}})]})]})})]})]})},R=function(){var t=Object(a.useState)(""),e=Object(j.a)(t,2),n=e[0],s=e[1],c=Object(a.useState)(""),r=Object(j.a)(c,2),l=r[0],o=r[1],u=Object(a.useState)(!1),h=Object(j.a)(u,2),x=h[0],v=h[1];return Object(a.useEffect)((function(){try{var t=N.parse(n);console.log(t),v(t.isAccepted(l))}catch(e){v(!1)}}),[n,l]),Object(i.jsxs)(b.a,{children:[Object(i.jsx)("h1",{children:"DFA Simulator"}),Object(i.jsxs)(d.a,{children:[Object(i.jsxs)(f.a,{children:[Object(i.jsx)("h2",{children:"Input Description"}),Object(i.jsxs)(p.a,{style:{height:"375px"},children:[Object(i.jsx)(p.a.Prepend,{children:Object(i.jsx)(p.a.Text,{children:"Input"})}),Object(i.jsx)(O.a,{as:"textarea","aria-label":"input",onChange:function(t){return s(t.target.value)}})]})]}),Object(i.jsxs)(f.a,{children:[Object(i.jsx)("h2",{children:"Simulate Input"}),Object(i.jsxs)(p.a,{children:[Object(i.jsx)(p.a.Prepend,{children:Object(i.jsx)(p.a.Text,{children:"Input"})}),Object(i.jsx)(O.a,{"aria-label":"input",onChange:function(t){return o(t.target.value)}})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("h4",{children:["Input is ",x?"ACCEPTED":"NOT ACCEPTED","."]}),Object(i.jsx)(G,{description:n,input:l,options:{height:200}})]})]})]})};var H=function(){return Object(i.jsxs)(u.a,{children:[Object(i.jsx)("header",{children:Object(i.jsxs)(l.a,{className:"mx-auto",style:{maxWidth:"1150px"},collapseOnSelect:!0,expand:"lg",variant:"light",children:[Object(i.jsx)(l.a.Brand,{as:u.b,to:"/",children:"FSM Tools"}),Object(i.jsx)(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(i.jsx)(l.a.Collapse,{id:"responsive-navbar-nav",children:Object(i.jsxs)(o.a,{className:"mr-auto",children:[Object(i.jsx)(o.a.Link,{className:"text-secondary",as:u.c,to:"/simulator",children:"Simulator"}),Object(i.jsx)(o.a.Link,{className:"text-secondary",as:u.c,to:"/minimizer",children:"Minimizer"})]})})]})}),Object(i.jsx)("main",{children:Object(i.jsxs)(h.c,{children:[Object(i.jsx)(h.a,{path:"/simulator",children:Object(i.jsx)(R,{})}),Object(i.jsx)(h.a,{path:"/minimizer",children:Object(i.jsx)(F,{})})]})})]})};r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(H,{})}),document.getElementById("root"))}},[[328,1,2]]]);
//# sourceMappingURL=main.6845618b.chunk.js.map